window.JSChat={},window.JSChat.run=(e=>{if("function"!=typeof e)throw new TypeError("The handler is not a function.");setTimeout(()=>{var t;if(null!==document.getElementById("loading"))for(t=0;t!==document.getElementsByClassName("content").length;t++){var n={};0===document.getElementsByClassName("content")[t].parentElement.getElementsByClassName("reply-info").length?n.replyMessageId="":n.replyMessageId=document.getElementsByClassName("content")[t].parentElement.getElementsByClassName("reply-info")[0].href.split("#")[1],n.node=document.getElementsByClassName("content")[t],n.username=document.getElementsByClassName("content")[t].parentElement.parentElement.parentElement.getElementsByClassName("signature")[0].getElementsByClassName("username")[0].innerHTML,n.rawHtml=document.getElementsByClassName("content")[t].innerHTML,n.visibleText=document.getElementsByClassName("content")[t].innerText,n.userId=document.getElementsByClassName("content")[t].parentElement.parentElement.parentElement.getElementsByClassName("signature")[0].classList[1].split("-")[1],n.messageId=document.getElementsByClassName("content")[t].parentElement.id.split("-")[1],n.send=function(e){document.getElementById("input").value=e,document.getElementById("sayit-button").click()},n.reply=function(e){document.getElementById("input").value=":"+n.messageId+" "+e,document.getElementById("sayit-button").click()},0===document.getElementsByClassName("content")[t].parentElement.parentElement.parentElement.getElementsByClassName("signature")[0].getElementsByClassName("moderator").length?n.isModerator=!1:n.isModerator=!0,0===document.getElementsByClassName("content")[t].parentElement.parentElement.parentElement.getElementsByClassName("signature")[0].getElementsByClassName("owner").length?n.isRoomOwner=!1:n.isRoomOwner=!0,n.deleteMessage=function(e){if(void 0===document.getElementById("message-"+e).getElementsByClassName("popup")[0].getElementsByClassName("delete")[0])throw document.getElementById("message-"+e).getElementsByClassName("popup")[0].getElementsByClassName("btn-close")[0].click(),new Error("The message cannot be deleted");document.getElementById("message-"+e).getElementsByClassName("popup")[0].getElementsByClassName("delete")[0].click()},"<b>(message handled)</b>"!==n.rawHtml&&(e(n),document.getElementsByClassName("content")[t].innerHTML="<b>(message handled)</b>")}},1e3)}),window.JSChat.getUserList=function(){if(null===document.getElementById("loading"))throw new Error("The chatroom is in the loading state.");var e=[];document.getElementById("present-users").getElementsByClassName("more")[0].click();for(var t=0;t!==document.getElementById("present-users").querySelectorAll("li").length;t++)"more"!==document.getElementById("present-users").querySelectorAll("li")[t].className&&(e[e.length]={},e[e.length-1].username=document.getElementById("present-users").querySelectorAll("li")[t].getElementsByClassName("user-gravatar32")[0].alt,e[e.length-1].userId=document.getElementById("present-users").querySelectorAll("li")[t].id.split("present-user-")[1])};
